{% extends 'base.html.twig' %}

{% block title %}
	{{ 'Change my password'|trans }}
	|
	{{ parent() }}
{% endblock %}

{% block body %}
	<div class="container">
		<div class="mt-20 mb-20 md:mt-32 md:mb-32 md:w-1/2 md:mx-auto lg:w-1/3">
			<h1 class="font-bold text-2xl">{{ 'Change my password'|trans }}</h1>

			{% if user %}
				<form method="post">
					{% if app.user %}
						<div class="mt-3">
							{{ 'You are logged in as'|trans }}
							{{ app.user.username }},
							<a href="{{ path('app_logout') }}">{{ 'Logout'|trans }}</a>
						</div>
					{% endif %}

					{% for error in app.flashes('error') %}
						<span class="block mt-4 text-red-600 text-sm">{{ error }}</span>
					{% endfor %}

					{% for message in app.flashes('success') %}
						<span class="block mt-4 text-green-600 text-sm">{{ message }}</span>
					{% endfor %}

					<div class="form-group">
						<input type="password" name="password" placeholder="{{ 'New password'|trans }}" required autofocus>
					</div>
					<div class="form-group mt-4">
						<input type="password" name="confirmPassword" placeholder="{{ 'Confirm your password'|trans }}" required>
					</div>
					<div class="form-group">
						<button class="btn" type="submit" id="resetPassword">
							Valider
						</button>
					</div>
				</form>
			{% else %}
				<p class="mt-4">{{ 'You did not requested a password change.'|trans }}</p>
				<div class="mt-2 flex justify-between">
					<a href="{{ path('password_reset_request') }}" class="text-sm text-blue-500 underline">{{ 'Change my password'|trans }}</a>
					<a href="{{ path('app_login') }}" class="text-sm text-blue-500 underline">{{ 'Log In'|trans }}</a>
				</div>
			{% endif %}
		</div>
	</div>
{% endblock %}
